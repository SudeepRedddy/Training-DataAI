{% extends "base.html" %}
{% block content %}

<div class="container">

  <!-- Product Section -->
  <div class="row align-items-start mb-5">

    <!-- Image -->
    <div class="col-md-5 text-center">
      {% if product.image %}
      <div class="card shadow-sm border-0 mb-3" style="border-radius: 16px;">
        <img
          src="{{ url_for('static', filename='uploads/' + product.image) }}"
          class="img-fluid rounded"
          style="max-height: 350px; object-fit: contain;"
          alt="Product Image">
      </div>
      {% endif %}
    </div>

    <!-- Details -->
    <div class="col-md-7">
      <h2 class="fw-bold mb-3">{{ product.name }}</h2>

      <p class="text-muted mb-3">
        {{ product.description }}
      </p>

      <h4 class="fw-bold text-success mb-4">
        ₹{{ product.price }}
      </h4>

      <!-- Action Buttons -->
      <div class="d-flex flex-wrap align-items-center gap-3 mb-4">

        <a href="/products" class="btn btn-outline-secondary">
          ← Back to products
        </a>

        <a class="btn btn-primary btn-lg"
           href="{{ url_for('add_to_cart', product_id=product.id) }}">
          Add to Cart
        </a>

        {% if current_user.is_admin %}
        <a class="btn btn-danger"
           href="{{ url_for('delete_product', product_id=product.id) }}">
          Delete Product
        </a>
        {% endif %}

      </div>
    </div>

  </div>

  <!-- Related Products -->
  <h3 class="fw-bold mb-4">
    Related Products
  </h3>

  <div class="row g-4">
    {% for r in related %}
    <div class="col-md-4 col-sm-6">

      <a href="{{ url_for('product_detail', product_id=r.id) }}"
         class="text-decoration-none text-dark">

        <div class="card h-100 shadow-sm border-0"
             style="border-radius: 16px; transition: transform 0.2s;">
          
          <img
            src="{{ url_for('static', filename='uploads/' + r.image) }}"
            class="card-img-top"
            style="height: 180px; object-fit: cover; border-top-left-radius: 16px; border-top-right-radius: 16px;">

          <div class="card-body">
            <h5 class="fw-semibold mb-1">{{ r.name }}</h5>
            <p class="fw-bold text-success mb-0">₹{{ r.price }}</p>
          </div>

        </div>
      </a>

    </div>
    {% endfor %}
  </div>

</div>

{% endblock %}
